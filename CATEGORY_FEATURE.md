# 待办事项分类功能

## 功能概述

为待办事项应用添加了完整的分类功能，用户可以：
- 为每个任务选择分类
- 使用自定义图标和颜色区分不同分类
- 按分类筛选任务
- 在任务列表中查看分类标签

## 新增功能

### 1. 数据库更新 (`src/db.ts`)
- 添加了 `Category` 接口，包含 id、name、icon、color 字段
- 为 `Todo` 接口添加了可选的 `categoryId` 字段
- 升级数据库到版本 2，添加了 categories 表
- 预设了 6 个默认分类：
  - 工作 (Work) - 蓝色，公文包图标
  - 个人 (Personal) - 绿色，用户图标
  - 购物 (Shopping) - 橙色，购物车图标
  - 健康 (Health) - 红色，心形图标
  - 学习 (Study) - 紫色，书本图标
  - 家庭 (Home) - 粉色，房屋图标

### 2. 分类组件 (`src/components/CategoryComponents.tsx`)
创建了三个新组件：

#### CategorySelector
- 用于筛选待办事项
- 显示"All"选项和所有分类
- 选中的分类会高亮显示并应用分类颜色

#### CategoryBadge
- 用于在任务列表中显示分类标签
- 显示分类图标和名称
- 使用分类的自定义颜色作为背景
- 支持小尺寸模式

#### CategoryPicker
- 用于在创建新任务时选择分类
- 网格布局显示所有分类选项
- 可选择或取消选择分类

### 3. 日历组件更新 (`src/components/Calendar.tsx`)
- 添加了分类筛选器，显示在日历上方
- 在新任务表单中集成了分类选择器
- 在任务列表中显示分类标签
- 支持按分类过滤任务

### 4. 主页面更新 (`src/routes/index.tsx`)
- 加载分类数据
- 更新 `handleAddTodo` 函数以接收分类 ID
- 将分类数据传递给 Calendar 组件
- 添加分类管理页面导航链接

### 5. 分类管理页面 (`src/routes/categories.tsx`) ✨ 新增
- 专门的分类管理界面
- 支持创建、编辑、删除分类
- 18种图标可选（工作、个人、购物、健康、学习、家庭、咖啡、健身、音乐、飞机、相机、代码、调色板、游戏、餐具、汽车、毕业帽、听诊器）
- 12种预设颜色可选
- 实时预览分类效果

### 6. 统计页面增强 (`src/components/Statistics.tsx`) ✨ 新增
- 按分类显示任务统计
- 每个分类的完成率可视化
- 显示最高效的分类
- 分类任务数量和完成情况

## 使用方法

### 管理分类
1. 点击主页面的"Categories"按钮
2. 点击"Add Category"创建新分类
3. 输入分类名称
4. 从18种图标中选择一个
5. 从12种颜色中选择一个
6. 点击"Create"保存
7. 可以编辑或删除现有分类

### 添加带分类的任务
1. 在日历中选择一个日期
2. 输入任务文本
3. 在分类选择器中选择一个分类（可选）
4. 点击添加按钮

### 按分类筛选任务
1. 在日历上方的"Filter by Category"区域
2. 点击要筛选的分类按钮
3. 日历将只显示该分类的任务
4. 点击"All"显示所有任务

### 查看任务分类
- 在任务列表中，每个任务下方会显示其分类标签
- 标签使用分类的自定义颜色和图标

### 查看分类统计
1. 点击"Statistics"按钮进入统计页面
2. 滚动到"Tasks by Category"部分
3. 查看每个分类的任务数量、完成率和进度
4. 查看最高效的分类

## 技术细节

### 图标系统
- 使用 lucide-react 图标库
- 图标名称存储为字符串，动态加载对应组件
- 支持18种图标：Briefcase, User, ShoppingCart, Heart, BookOpen, Home, Coffee, Dumbbell, Music, Plane, Camera, Code, Palette, Gamepad2, Utensils, Car, GraduationCap, Stethoscope

### 颜色系统
- 使用十六进制颜色代码
- 12种预设颜色：蓝色、绿色、橙色、红色、紫色、粉色、青色、柠檬绿、深橙、靛蓝、青绿、紫罗兰
- 颜色应用于按钮背景、标签背景等
- 支持渐变和透明度效果

### 数据库迁移
- 使用 Dexie 的版本控制系统
- 自动升级现有数据库
- 在升级时添加默认分类数据
- 支持分类的CRUD操作

## 已实现的改进 ✅

1. ✅ 添加自定义分类功能
   - 允许用户创建新分类
   - 自定义分类名称、图标和颜色
   - 编辑和删除分类

2. ✅ 分类管理页面
   - 专门的分类管理界面
   - 编辑现有分类
   - 删除分类（保留相关任务）
   - 美观的UI设计

3. ✅ 统计页面集成
   - 按分类显示统计数据
   - 分类完成率图表
   - 最高效的分类显示

## 未来改进建议

1. 分类排序
   - 拖拽重新排序分类
   - 自定义分类显示顺序

2. 导入/导出增强
   - 包含分类信息的数据导出
   - 分类配置的备份和恢复
